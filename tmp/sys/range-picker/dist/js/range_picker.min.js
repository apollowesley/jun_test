/*! range-picker - v0.0.1-dev - 2016-03-14 */
!function(a){"use strict";function b(a){return"undefined"==typeof a}function c(a,b){return a.replace(g,function(a,c){return b[c]})}function d(a,c){if(b(c.startValue)||b(c.endValue))throw new Error("startValue and endValue is need");if(b(c.translateSelectLabel))throw new Error(" RangePicker: translateSelectLabel is need");this.__init(a,c)}function e(a){this.__init(a)}function f(a){this.__init(a)}var g=/<%=\s*(\w+)\s*%>/g;d.prototype={constructor:d,__defaultOptions:{type:"single"},__template:"<div class='range-picker-wrapper'><div class='range-picker'><span class='label range-label'><%= startValue %></span><span class='label range-label end-label'><%= endValue %></span></div></div>",__init:function(b,c){this.__options=a.extend({},this.__defaultOptions,c),this.__$containerElement=b,this.__render(),this.__$rangepickerElement=this.__$containerElement.find(".range-picker"),this.__addWidget()},__render:function(){var a={startValue:this.__options.startValue,endValue:this.__options.endValue},b=c(this.__template,a);this.__$containerElement.html(b)},__addWidget:function(){var b=a.proxy(this.__handleLabelPositionChange,this);this.__selectCursors=[],this.__selectCursors.push(new e({positionChange:b,totalWidth:this.__$rangepickerElement.width()})),"double"===this.__options.type&&this.__selectCursors.push(new e({positionChange:b,totalWidth:this.__$rangepickerElement.width()})),this.__processBar=new f,this.__$rangepickerElement.append(this.__processBar.getJQueryElement());for(var c=0;c<this.__selectCursors.length;c++)this.__$rangepickerElement.append(this.__selectCursors[c].getJQueryElement());this.__setWidgetInitialValue()},__setWidgetInitialValue:function(){var a=this.__$rangepickerElement.width();this.__selectCursors[0].render(this.__options.translateSelectLabel(a,a)),b(this.__selectCursors[1])||this.__selectCursors[1].render(this.__options.translateSelectLabel(0,a)),this.__selectCursors[0].updatePosition({left:a-this.__selectCursors[0].getJQueryElement().outerWidth()/2}),b(this.__selectCursors[1])||this.__selectCursors[1].updatePosition({left:-this.__selectCursors[1].getJQueryElement().outerWidth()/2}),this.__updateProcessBarView()},__handleLabelPositionChange:function(a){this.__updateView(a.left)},__updateView:function(){this.__updateCursorView(),this.__updateProcessBarView()},__updateCursorView:function(){for(var a=0,b="",c=null;a<this.__selectCursors.length;a++)c=this.__selectCursors[a].getArrowPosition(),b=this.__options.translateSelectLabel(c.left,this.__$rangepickerElement.width()),this.__selectCursors[a].render(b)},__updateProcessBarView:function(){var a=this.__getCursorPosition(),b={left:a.start,right:this.__$rangepickerElement.width()-a.end};this.__processBar.updatePosition(b)},__getCursorPosition:function(){var a={start:0};return a.end=this.__selectCursors[0].getArrowPosition().left,b(this.__selectCursors[1])||(this.__selectCursors[1].getArrowPosition().left>this.__selectCursors[0].getArrowPosition().left?(a.start=a.end,a.end=this.__selectCursors[1].getArrowPosition().left):a.start=this.__selectCursors[1].getArrowPosition().left),a},getSelectValue:function(){var a=this.__getCursorPosition();return a.totalWidth=this.__$rangepickerElement.width(),a}},e.prototype={constructor:e,__defaultOptions:{positionChange:a.loop,initValue:"",totalWidth:0},__template:"<span class='label select-label'></span>",__init:function(b){this.__options=a.extend({},this.__defaultOptions,b),this.__$element=a(this.__template),this.render(this.__options.initValue),this.__bindDragEventHandler()},render:function(a){this.__$element.text(a)},__bindDragEventHandler:function(){var b=this;this.__$element.on("mousedown",function(b){this.__rangepicker={isMouseDown:!0,mouseStartX:b.clientX,previousMoveDistance:0},a(this).css("zIndex",1e3)}).on("mouseup",function(){this.__rangepicker=null,a(this).css("zIndex",0)}).on("mousemove",function(a){this.__rangepicker&&this.__rangepicker.isMouseDown&&b.__handleDragEvent(a.clientX,this.__rangepicker)}).on("mouseout",function(){a(this).css("zIndex",0),this.__rangepicker=null})},__handleDragEvent:function(a,b){var c=a-b.mouseStartX-b.previousMoveDistance;b.previousMoveDistance=a-b.mouseStartX;var d=this.__calculatePosition(c);this.updatePosition({left:d}),this.__options.positionChange(this.getArrowPosition(),this.__$element)},__calculatePosition:function(a){var b=this.__$element.position().left,c=this.__$element.outerWidth()/2,d=b+a;return d+c>this.__options.totalWidth?d=this.__options.totalWidth-c:0>d+c&&(d=-c),d},updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},getJQueryElement:function(){return this.__$element},getArrowPosition:function(){var a=this.__$element.position(),b={left:a.left+this.__$element.outerWidth()/2,top:0};return b}},f.prototype={constructor:f,__template:"<span class='process'></span>",__init:function(){this.__$element=a(this.__template)},updatePosition:function(a){for(var b in a)a.hasOwnProperty(b)&&this.__$element.css(b,a[b]+"px")},getJQueryElement:function(){return this.__$element}},a.fn.rangepicker=function(a){return new d(this,a)}}($);
//# sourceMappingURL=range_picker.min.js.map
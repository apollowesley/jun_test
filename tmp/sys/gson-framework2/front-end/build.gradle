plugins {
    id "com.moowork.node" version "1.2.0"
}

node {
    version = '11.1.0'
    yarnVersion = '1.12.3'
    download = true
    workDir = file("${project.parent.projectDir}/.gradle/nodejs")
    npmWorkDir = file("${project.parent.projectDir}/.gradle/npm")
    yarnWorkDir = file("${project.parent.projectDir}/.gradle/yarn")
}

task bootRun(dependsOn: 'start') {
    group = 'application'
    description = 'Run the client app (for use with gradle bootRun -parallelï¼‰'
}

task start(type: YarnTask, dependsOn: 'yarn') {
    group = 'application'
    description = 'Run the client app'
    args = ['run', 'serve']
}

task build(type: YarnTask, dependsOn: 'yarn') {
    group = 'build'
    description = 'Build the client bundle'
    args = ['run', 'build']
}

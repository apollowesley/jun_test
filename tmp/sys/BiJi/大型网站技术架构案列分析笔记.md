### 概述
- 特点
- 大型互联网应用系统有以下特点
高并发，大流量


1. 高可用，系统7X24小时不间断服务
1. 海量数据
1. 用户分布广泛，网络情况复杂
1. 由于互联网的开放性，安全环境恶劣
1. 需求快速变更，发布频繁
1. 渐进式发展

### 发展历程
- 初始阶段的网站架构都是一台服务器部署所有模块

![输入图片说明](https://gitee.com/uploads/images/2018/0111/215128_e459efb5_1478371.png "屏幕截图.png")






- 应用服务器和数据服务分离，不同特性的服务器承担不同的角色，网站的并发处理能力和数据存储空间得到很大改善
![输入图片说明](https://gitee.com/uploads/images/2018/0111/215420_3c5c9b22_1478371.png "屏幕截图.png")
 

- 随着用户的增多，网站又一次面临挑战，数据库压力太大导致访问延迟，进而影响这个性能
- 网站访问的特点和现实世界的财富分配一样遵循二八定律，80%的业务访问集中在20%的数据上，这个时候使用缓存可以有效的改善网站性能
### 网站使用的缓存可以分为两种


1. 缓存在应用服务器上的本地缓存，本地缓存访问速度更快,但是受限于服务内存大小，且会出现和应用程序争内存的情况
1. 缓存在专门服务器上的远程缓存，可以使用集群的方式部署大内存的服务器作为专门的缓存服务器，理论上可以做到不受内存容量限制


![输入图片说明](https://gitee.com/uploads/images/2018/0111/220552_cffba3a3_1478371.png "屏幕截图.png")


使用缓存后，访问数据库压力可以得到有效缓解，但是单一的应用服务器处理的请求连接有限，在网站高峰访问时期，应用服务器会成为整个网站的瓶颈

### 使用应用服务器集群改善网站的 并发处理能力
集群是网站解决高并发，海量数据的常用手段，当一台服务器的处理能力，存储空间不足时，不要企图去更换更大的服务器，对大型网站而言，不管多强大的服务器，都满足不了网站持续增长的业务，更有效的做法是增加一台服务器来分摊压力

![输入图片说明](https://gitee.com/uploads/images/2018/0111/221243_12e5a476_1478371.png "屏幕截图.png")

### 应用服务器性能优化


1. 分布式缓存
- 网站性能优化第一定律：优先考虑使用缓存优化性能

2. 异步操作


- 使用消息队列将调用异步化，可改善网站的性能，消息队列具有很好的消峰作用

3. 使用集群

1. 代码优化
- 使用多线程
- 将对象设计为无状态对象，无状态对象本省不存储状态信息，多线程并发访问时就不会出现状态不一致
- 使用局部对象
- 并发访问时使用资源锁
### 网购秒杀系统架构设计
1. 技术挑战

- 对现有业务网站造成冲击
- 高并发应用下，数据库负载
- 突然增加的网落及服务带宽
2. 应对策略


- 独立部署秒杀系统和分配独立域名与现有业务网站完全隔离，避免拖垮整个业务网站
- 秒杀页面静态化，不使用原有的商品详情页，将商品参数，详情写入一个静态页面，可以减少数据库的访问
- 动态生成下单页面的url,
- 由于秒杀的特性，库存和用户的参与数差别很大，可以限制用户的请求数，拦截大部分请求跳转至秒杀结束页面
    
![输入图片说明](https://gitee.com/uploads/images/2018/0115/112551_9dad8e14_1478371.png "屏幕截图.png")
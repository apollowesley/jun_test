{"version":3,"sources":["webpack:///static/js/app.305f88daf5ac069bb52d.js","webpack:///./src/frontend/js/store.js","webpack:///./src/frontend/js/util.js","webpack:///./src/frontend/js/animate.js","webpack:///./src/frontend/app.vue?0bea","webpack:///./src/frontend/components/card.vue?48ee","webpack:///./src/frontend/components/danmu.vue?feb4","webpack:///./src/frontend/components/list.vue?c945","webpack:///./src/frontend/components/loginPanel.vue?8a08","webpack:///./src/frontend/components/message.vue?b64a","webpack:///./src/frontend/components/textBox.vue?6613","webpack:///./src/frontend/components/userListPanel.vue","webpack:///./src/frontend/components/message.vue?8988","webpack:///./src/frontend/components/textBox.vue?9d84","webpack:///./src/frontend/components/card.vue?8775","webpack:///./src/frontend/components/loginPanel.vue?c229","webpack:///./src/frontend/components/userListPanel.vue?f407","webpack:///./src/frontend/components/danmu.vue?820d","webpack:///./src/frontend/components/list.vue?cd31","webpack:///./src/frontend/app.vue?a289","webpack:///app.vue","webpack:///card.vue","webpack:///danmu.vue","webpack:///list.vue","webpack:///loginPanel.vue","webpack:///message.vue","webpack:///textBox.vue","webpack:///userListPanel.vue","webpack:///./src/frontend/js/client.js","webpack:///./src/frontend/main.js"],"names":["webpackJsonp","module","__webpack_exports__","__webpack_require__","connect","state","client","__WEBPACK_IMPORTED_MODULE_3__client__","host","port","alert","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_2__animate__","__WEBPACK_IMPORTED_MODULE_4__util__","use","store","Store","users","me","sessions","currentSession","filterKey","barrageContainer","getters","_ref","_ref2","onlineUsers","_ref3","myLoginName","filter","user","loginName","_ref4","_ref5","_ref6","session","toUpperCase","includes","_ref7","mutations","initSessions","userMapNotRead","forEach","messages","msg","read","count","index","indexOf","notReadMsgCount","splice","setCurrentSession","exitSession","i","push","notRead","j","length","to","find","initUsers","refreshUser","oldUser","setFilterKey","value","logout","appendBarrage","message","className","barrage","document","createElement","classList","add","innerHTML","content","from","style","left","offsetWidth","appendChild","top","Math","random","offsetHeight","parentNode","removeChild","actions","register","_ref8","payload","login","_ref9","sendMsg","_ref10","msgId","id","self","date","Date","sendBarrage","_ref11","findSession","__WEBPACK_IMPORTED_MODULE_2__store__","findUser","copyProperties","target","source","console","error","key","cache","valueStr","window","localStorage","getItem","JSON","parse","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","setItem","guid","replace","c","r","toString","d","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__","animation","direction","aim_distance","speed","cb","arguments","undefined","log","queueObj","target_point_x","target_point_y","next","n_dir","queue_x","this","fn","move","dir","last_x","real","ani","real_dir","offsetLeft","temp","requestAnimationFrame","tempArr","shift","offsetTop","temp_target_point","exports","injectStyle","ssrContext","Component","render","_vm","_h","$createElement","_c","_self","directives","name","rawName","staticClass","_l","item","_v","_s","_f","class","attrs","width","height","src","img","_e","staticRenderFns","expression","disabled","placeholder","domProps","on","keyup","onKeyup","input","$event","composing","alt","type","password","click","toggleLogin","denglu","showLoginForm","confirmPassword","registerCode","zhuce","staticStyle","display","vertical-align","float","background-color","href","color","active","border-radius","text-align","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1__components_card__","__WEBPACK_IMPORTED_MODULE_1__components_card___default","__WEBPACK_IMPORTED_MODULE_2__components_list__","__WEBPACK_IMPORTED_MODULE_2__components_list___default","__WEBPACK_IMPORTED_MODULE_3__components_textBox__","__WEBPACK_IMPORTED_MODULE_3__components_textBox___default","__WEBPACK_IMPORTED_MODULE_4__components_message__","__WEBPACK_IMPORTED_MODULE_4__components_message___default","__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__","__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default","__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__","__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default","__WEBPACK_IMPORTED_MODULE_7__components_danmu_vue__","__WEBPACK_IMPORTED_MODULE_7__components_danmu_vue___default","__WEBPACK_IMPORTED_MODULE_9_vuex__","components","Card","a","List","TextBox","Message","loginPanel","userListPanel","danmu","computed","methods","e","__WEBPACK_IMPORTED_MODULE_1__js_store__","data","$store","dispatch","mounted","getElementsByClassName","filters","truncateStr","substring","__WEBPACK_IMPORTED_MODULE_2__js_util__","credential","autoLogin","time","getHours","getMinutes","readFilter","alreadyRead","scroll-bottom","componentUpdated","el","scrollTop","scrollHeight","clientHeight","keyCode","registerEvent","socket","callBack","onReceiveMsg","onDisconnect","onNotifyUserLogin","onKickOff","onReceiveRead","onReceiveBarrage","ChatClient","events","param","emit","code","rMsg","rData","__WEBPACK_IMPORTED_MODULE_0__store__","commit","__WEBPACK_IMPORTED_MODULE_1__util__","ss","userFrom","onlineUser","prototype","event","callback","connectUrl","io","call","__WEBPACK_IMPORTED_MODULE_1__app_vue__","__WEBPACK_IMPORTED_MODULE_1__app_vue___default","__WEBPACK_IMPORTED_MODULE_2__js_store__","__WEBPACK_IMPORTED_MODULE_3__css_reset_css__","__WEBPACK_IMPORTED_MODULE_4__css_main_less__","config","devtools","template","App"],"mappings":"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","file":"static/js/app.305f88daf5ac069bb52d.js","sourcesContent":["webpackJsonp([1],[\n/* 0 */,\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__animate__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__client__ = __webpack_require__(117);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__util__ = __webpack_require__(32);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */]);\n\nfunction connect(state) {\n  state.client = new __WEBPACK_IMPORTED_MODULE_3__client__[\"a\" /* ChatClient */]({ host: '47.94.2.0', port: 80 });\n  if (!state.client.connect()) {\n    alert('连接失败');\n  }\n}\n\nvar store = new __WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* default */].Store({\n  state: {\n    client: null,\n    users: [],\n    me: null,\n    sessions: [],\n    currentSession: null,\n    filterKey: '',\n    barrageContainer: null\n  },\n  getters: {\n    client: function client(_ref) {\n      var _client = _ref.client;\n      return _client;\n    },\n    users: function users(_ref2) {\n      var _users = _ref2.users;\n      return _users;\n    },\n    onlineUsers: function onlineUsers(_ref3) {\n      var users = _ref3.users,\n          myLoginName = _ref3.myLoginName;\n      return users.filter(function (user) {\n        return user.loginName !== myLoginName;\n      });\n    },\n    me: function me(_ref4) {\n      var _me = _ref4.me;\n      return _me;\n    },\n    myLoginName: function myLoginName(_ref5) {\n      var _myLoginName = _ref5.myLoginName;\n      return _myLoginName;\n    },\n    sessions: function sessions(_ref6) {\n      var _sessions = _ref6.sessions,\n          filterKey = _ref6.filterKey;\n      return _sessions && _sessions.filter(function (session) {\n        return !filterKey || session.loginName.toUpperCase().includes(filterKey.toUpperCase());\n      });\n    },\n    currentSession: function currentSession(_ref7) {\n      var _currentSession = _ref7.currentSession;\n      return _currentSession;\n    }\n  },\n  mutations: {\n    initSessions: function initSessions(state, sessions) {\n      var userMapNotRead = {},\n          users = state.users;\n\n      sessions.forEach(function (session) {\n        session.messages.forEach(function (msg) {\n          if (!msg.read) {\n            if (!userMapNotRead[session.loginName]) {\n              userMapNotRead[session.loginName] = 0;\n            }\n            userMapNotRead[session.loginName]++;\n          }\n        });\n      });\n\n      users.forEach(function (user) {\n        var count = userMapNotRead[user.loginName];\n        var index = users.indexOf(user);\n        user.notReadMsgCount = count;\n        users.splice(index, 1, user);\n      });\n\n      state.sessions = sessions;\n    },\n    setCurrentSession: function setCurrentSession(state, session) {\n      if (!session.messages) session.messages = [];\n      var exitSession = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"a\" /* findSession */])(session.loginName);\n      if (exitSession) {\n        state.currentSession = exitSession;\n      } else {\n        exitSession = session;\n        state.currentSession = session;\n        state.sessions.push(session);\n      }\n\n      exitSession.notRead = 0;\n\n      for (var j = 0; j < exitSession.messages.length; j++) {\n        if (!exitSession.messages[j].read && state.me.loginName === exitSession.messages[j].to) {\n          state.client.read(exitSession.messages[j]);\n          break;\n        }\n      }\n\n      var find = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"b\" /* findUser */])(session.loginName);\n      if (find) {\n        var index = state.users.indexOf(find);\n        find.notReadMsgCount = 0;\n        state.users.splice(index, 1, find);\n      }\n    },\n    initUsers: function initUsers(state, user) {\n      state.me = user;\n      state.users = user.onlineUsers;\n    },\n    refreshUser: function refreshUser(state, user) {\n      var oldUser = void 0;\n      if (oldUser = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"b\" /* findUser */])(user.loginName)) {\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"c\" /* copyProperties */])(oldUser, user);\n        return state.users[state.users.indexOf(oldUser)] = user;\n      }\n\n      state.users.push(user);\n    },\n\n    setFilterKey: function setFilterKey(state, value) {\n      return state.filterKey = value;\n    },\n    logout: function logout(state) {\n      return state.me = null;\n    },\n    appendBarrage: function appendBarrage(state, message) {\n      var speed = 3,\n          className = void 0,\n          barrage = document.createElement(\"div\"),\n          max = 1,\n          min = 0;\n\n      barrage.classList.add(\"barrage\");\n\n      barrage.innerHTML = message.content;\n      className = message.from === state.me.loginName ? 'myBarrage' : 'otherBarrage';\n      barrage.classList.add(className);\n      barrage.style.left = state.barrageContainer.offsetWidth + \"px\";\n      state.barrageContainer.appendChild(barrage);\n      barrage.style.top = (Math.random() * (max - min) + min) * (state.barrageContainer.offsetHeight - barrage.offsetHeight) + \"px\";\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__animate__[\"a\" /* default */])(barrage, \"left\", state.barrageContainer.offsetWidth + barrage.offsetWidth, speed, function () {\n        barrage.parentNode.removeChild(barrage);\n      });\n    }\n  },\n  actions: {\n    register: function register(_ref8, payload) {\n      var state = _ref8.state;\n\n      connect(state);\n      state.client.register(payload);\n    },\n    login: function login(_ref9, payload) {\n      var state = _ref9.state;\n\n      connect(state);\n      state.client.login(payload);\n    },\n    sendMsg: function sendMsg(_ref10, content) {\n      var state = _ref10.state;\n\n      var msgId = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"d\" /* guid */])(),\n          message = {\n        id: msgId,\n        from: state.me.loginName,\n        to: state.currentSession.loginName,\n        content: content,\n        self: true,\n        read: false,\n        date: new Date()\n      };\n\n      var session = {};\n      __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4__util__[\"c\" /* copyProperties */])(session, state.currentSession);\n      session.messages.push(message);\n      state.currentSession = session;\n\n\n      state.client.sendMsg({\n        id: msgId,\n        'from': state.me.loginName,\n        'to': state.currentSession.loginName,\n        content: content\n      });\n    },\n    sendBarrage: function sendBarrage(_ref11, content) {\n      var state = _ref11.state;\n\n      state.client.sendBarrage({\n        'from': state.me.loginName,\n        content: content\n      });\n    }\n  }\n});\n/* harmony default export */ __webpack_exports__[\"a\"] = (store);\n\n/***/ }),\n/* 11 */,\n/* 12 */,\n/* 13 */,\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */,\n/* 19 */,\n/* 20 */,\n/* 21 */,\n/* 22 */,\n/* 23 */,\n/* 24 */,\n/* 25 */,\n/* 26 */,\n/* 27 */,\n/* 28 */,\n/* 29 */,\n/* 30 */,\n/* 31 */,\n/* 32 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return findSession; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return findUser; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return copyProperties; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"e\", function() { return cache; });\n/* unused harmony export response */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return guid; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__ = __webpack_require__(104);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__ = __webpack_require__(108);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__store__ = __webpack_require__(10);\n\n\n\n\nfunction findSession(loginName) {\n  var sessions = __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].getters.sessions;\n  for (var i = 0; i < sessions.length; i++) {\n    if (sessions[i].loginName === loginName) {\n      return sessions[i];\n    }\n  }\n}\n\nfunction findUser(loginName) {\n  var users = __WEBPACK_IMPORTED_MODULE_2__store__[\"a\" /* default */].getters.users;\n  for (var i = 0; i < users.length; i++) {\n    if (users[i].loginName === loginName) {\n      return users[i];\n    }\n  }\n}\n\nfunction copyProperties(target, source) {\n  if (!target || !source) {\n    return console.error('target and source must not be null');\n  }\n  for (var key in source) {\n    target[key] = source[key];\n  }\n}\n\nfunction cache(key, value) {\n  if (!value) {\n    var valueStr = window.localStorage.getItem(key);\n    return valueStr ? JSON.parse(valueStr) : null;\n  }\n\n  if ((typeof value === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_typeof___default()(value)) === 'object') {\n    value = __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default()(value);\n  }\n  window.localStorage.setItem(key, value);\n}\n\nvar response = {\n  ok: function ok(data) {\n    this.code = 1;\n    this.rData = data;\n    return this;\n  },\n  fail: function fail(msg) {\n    this.code = 0;\n    this.rMsg = msg;\n    return this;\n  }\n};\n\nfunction guid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}\n\n\n\n/***/ }),\n/* 33 */,\n/* 34 */,\n/* 35 */,\n/* 36 */,\n/* 37 */,\n/* 38 */,\n/* 39 */,\n/* 40 */,\n/* 41 */,\n/* 42 */,\n/* 43 */,\n/* 44 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\nvar target_point_x = null,\n    target_point_y = null;\n\nvar move = function () {\n  return function (target, direction, aim_distance, speed) {\n    speed = typeof speed === \"number\" ? speed : 5;\n    var temp_target_point = void 0;\n    direction === \"left\" && (temp_target_point = target_point_x = target_point_x !== null ? target_point_x - aim_distance : target.offsetLeft - aim_distance);\n    direction === \"right\" && (temp_target_point = target_point_x = target_point_x !== null ? target_point_x + aim_distance : target.offsetLeft + aim_distance);\n    direction === \"top\" && (temp_target_point = target_point_y = target_point_y !== null ? target_point_y - aim_distance : target.offsetTop - aim_distance);\n    direction === \"bottom\" && (temp_target_point = target_point_y = target_point_y !== null ? target_point_y + aim_distance : target.offsetTop + aim_distance);\n    return function () {\n      if (direction === \"left\") {\n        target.offsetLeft > temp_target_point ? target.style.left = target.offsetLeft - speed + \"px\" : target.style.left = temp_target_point + \"px\";\n      } else if (direction === \"right\") {\n        target.offsetLeft < temp_target_point ? target.style.left = target.offsetLeft + speed + \"px\" : target.style.left = temp_target_point + \"px\";\n      } else if (direction === \"top\") {\n        target.offsetTop > temp_target_point ? target.style.top = target.offsetTop - speed + \"px\" : target.style.top = temp_target_point + \"px\";\n      } else if (direction === \"bottom\") {\n        target.offsetTop < temp_target_point ? target.style.top = target.offsetTop + speed + \"px\" : target.style.top = temp_target_point + \"px\";\n      }\n      return temp_target_point;\n    };\n  };\n}();\n\nfunction animation(target, direction, aim_distance, speed) {\n  var cb = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {\n    console.log(\"callback called\");\n  };\n\n  cb = typeof speed === \"function\" ? speed : cb;\n  var queueObj = [];\n\n  target_point_x = null, target_point_y = null;\n  queueObj.next = function (n_dir, queue_x, speed) {\n    this.push({\n      fn: move(target, n_dir, queue_x, speed),\n      dir: n_dir,\n      last_x: queue_x\n    });\n    return queueObj;\n  };\n  return function () {\n    function real(ani, real_dir) {\n      var temp = ani,\n          tempArr = void 0;\n\n      function fn() {\n        if (real_dir === \"left\" || real_dir === \"right\") {\n          if (target.offsetLeft !== temp()) {\n            requestAnimationFrame(fn);\n          } else {\n            queueObj[0] && (tempArr = queueObj.shift());\n            tempArr || cb();\n            tempArr && real(tempArr.fn, tempArr.dir);\n          }\n        } else if (real_dir === \"top\" || real_dir === \"bottom\") {\n          if (target.offsetTop !== temp()) {\n            requestAnimationFrame(fn);\n          } else {\n            queueObj[0] && (tempArr = queueObj.shift());\n            tempArr || cb();\n            tempArr && real(tempArr.fn, tempArr.dir);\n          }\n        }\n      }\n\n      requestAnimationFrame(fn);\n    }\n\n    real(move(target, direction, aim_distance, speed), direction);\n    return queueObj;\n  }();\n}\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (animation);\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(70)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(109),\n  /* template */\n  __webpack_require__(62),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-b822579a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(65)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(110),\n  /* template */\n  __webpack_require__(57),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b0957b\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 49 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(68)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(111),\n  /* template */\n  __webpack_require__(60),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 50 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(69)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(112),\n  /* template */\n  __webpack_require__(61),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-ab3957ee\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 51 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(66)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(113),\n  /* template */\n  __webpack_require__(58),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5ca4d274\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 52 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(63)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(114),\n  /* template */\n  __webpack_require__(55),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-081a726c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 53 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(64)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(115),\n  /* template */\n  __webpack_require__(56),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0e640443\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 54 */\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction injectStyle (ssrContext) {\n  __webpack_require__(67)\n}\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(116),\n  /* template */\n  __webpack_require__(59),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5d03e1c0\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 55 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\"\n    }],\n    staticClass: \"message\"\n  }, [(_vm.currentSession) ? _c('ul', _vm._l((_vm.currentSession.messages), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"time\")(item.date)))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.self\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.self ? _vm.me.img : _vm.currentSession.img\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\"\n    }, [_vm._v(_vm._s(item.content))]), _vm._v(\" \"), (item.self) ? _c('div', {\n      staticClass: \"read-text\"\n    }, [_vm._v(_vm._s(_vm._f(\"readFilter\")(item.read)) + \" \")]) : _vm._e()])])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n/***/ }),\n/* 56 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"disabled\": !_vm.currentSession,\n      \"placeholder\": \"按 Enter 发送\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"keyup\": _vm.onKeyup,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n/***/ }),\n/* 57 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"card\"\n  }, [_c('header', [_c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"width\": \"40\",\n      \"height\": \"40\",\n      \"alt\": _vm.me.name,\n      \"src\": _vm.me.img\n    }\n  }), _vm._v(\" \"), _c('p', {\n    staticClass: \"name\"\n  }, [_vm._v(_vm._s(_vm.me.loginName))])]), _vm._v(\" \"), _c('footer', [_c('input', {\n    staticClass: \"search\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"search user...\"\n    },\n    on: {\n      \"keyup\": _vm.onKeyup\n    }\n  })])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 58 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"loginPanel\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"loginForm\"\n    }\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoginForm),\n      expression: \"showLoginForm\"\n    }],\n    staticClass: \"login\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"还没注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.denglu\n    }\n  }, [_vm._v(\"登录\")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.showLoginForm),\n      expression: \"!showLoginForm\"\n    }],\n    staticClass: \"register\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         确认密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.confirmPassword),\n      expression: \"user.confirmPassword\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.confirmPassword)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.confirmPassword = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         注册秘钥:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.registerCode),\n      expression: \"user.registerCode\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.registerCode)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.registerCode = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"已经注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.zhuce\n    }\n  }, [_vm._v(\"注册\")])])])])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 59 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"150px\"\n    }\n  }, [_vm._v(\"\\n  当前登录用户\\n  \"), _c('ul', _vm._l((_vm.onlineUsers), function(item) {\n    return _c('li', [_c('img', {\n      staticStyle: {\n        \"width\": \"20px\",\n        \"height\": \"20px\",\n        \"display\": \"inline-block\",\n        \"vertical-align\": \"middle\"\n      },\n      attrs: {\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), (item.notReadMsgCount) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"yellow\"\n      }\n    }, [_vm._v(_vm._s(item.notReadMsgCount) + \"未读\")]) : _vm._e(), _vm._v(\" \"), _c('a', {\n      attrs: {\n        \"href\": \"#\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))])])\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n/* 60 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"barrageSendPanel\"\n  }, [_c('span', {\n    staticClass: \"soul-label\",\n    staticStyle: {\n      \"color\": \"red\"\n    }\n  }, [_vm._v(_vm._s(_vm.error))]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.msg),\n      expression: \"msg\"\n    }],\n    staticClass: \"soul-input\",\n    staticStyle: {\n      \"height\": \"50%\"\n    },\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.msg)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.msg = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.sendBarrage\n    }\n  }, [_vm._v(\"发送弹幕\")])])\n},staticRenderFns: []}\n\n/***/ }),\n/* 61 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.sessions), function(item, index) {\n    return _c('li', {\n      class: [{\n        active: _vm.currentSession ?\n          item.loginName === _vm.currentSession.loginName :\n          index == 0\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"alt\": item.loginName,\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticClass: \"name\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))]), _vm._v(\" \"), (item.notRead) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"red\",\n        \"border-radius\": \"5px\",\n        \"width\": \"30px\",\n        \"text-align\": \"center\"\n      }\n    }, [_vm._v(\"\\n          \" + _vm._s(item.notRead) + \"\\n        \")]) : _vm._e()])])\n  }))])\n},staticRenderFns: []}\n\n/***/ }),\n/* 62 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.me) ? _c('div', {\n    staticClass: \"view\"\n  }, [_c('div', {\n    staticClass: \"sidebar\"\n  }, [_c('card'), _vm._v(\" \"), _c('list')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"main\"\n  }, [_c('message'), _vm._v(\" \"), _c('TextBox')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"userListPanel\"\n  }, [_c('userListPanel')], 1), _vm._v(\" \"), _c('danmu')], 1) : _c('div', {\n    staticClass: \"view\"\n  }, [_c('loginPanel')], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 63 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 64 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 65 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 66 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 67 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 68 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 69 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 70 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 71 */,\n/* 72 */,\n/* 73 */,\n/* 74 */,\n/* 75 */,\n/* 76 */,\n/* 77 */,\n/* 78 */,\n/* 79 */,\n/* 80 */,\n/* 81 */,\n/* 82 */,\n/* 83 */,\n/* 84 */,\n/* 85 */,\n/* 86 */,\n/* 87 */,\n/* 88 */,\n/* 89 */,\n/* 90 */,\n/* 91 */,\n/* 92 */,\n/* 93 */,\n/* 94 */,\n/* 95 */,\n/* 96 */,\n/* 97 */,\n/* 98 */,\n/* 99 */,\n/* 100 */,\n/* 101 */,\n/* 102 */,\n/* 103 */,\n/* 104 */,\n/* 105 */,\n/* 106 */,\n/* 107 */,\n/* 108 */,\n/* 109 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_card__ = __webpack_require__(48);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_card___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_card__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_list__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_list___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__components_list__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_textBox__ = __webpack_require__(53);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_textBox___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_textBox__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_message__ = __webpack_require__(52);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__components_message___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__components_message__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__ = __webpack_require__(51);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_danmu_vue__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__components_danmu_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7__components_danmu_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__js_store__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_vuex__ = __webpack_require__(0);\n\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  components: { Card: __WEBPACK_IMPORTED_MODULE_1__components_card___default.a, List: __WEBPACK_IMPORTED_MODULE_2__components_list___default.a, TextBox: __WEBPACK_IMPORTED_MODULE_3__components_textBox___default.a, Message: __WEBPACK_IMPORTED_MODULE_4__components_message___default.a, loginPanel: __WEBPACK_IMPORTED_MODULE_5__components_loginPanel_vue___default.a, userListPanel: __WEBPACK_IMPORTED_MODULE_6__components_userListPanel_vue___default.a, danmu: __WEBPACK_IMPORTED_MODULE_7__components_danmu_vue___default.a },\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_9_vuex__[\"b\" /* mapGetters */])(['me']))\n});\n\n/***/ }),\n/* 110 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['me'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setFilterKey']), {\n    onKeyup: function onKeyup(e) {\n      this.setFilterKey(e.target.value);\n    }\n  })\n});\n\n/***/ }),\n/* 111 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__js_animate__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__js_store__ = __webpack_require__(10);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      msg: \"\",\n      error: ''\n    };\n  },\n\n  methods: {\n    sendBarrage: function sendBarrage() {\n      if (!this.msg) {\n        return this.error = '弹幕不能为空';\n      }\n      this.$store.dispatch('sendBarrage', this.msg);\n      this.msg = this.error = \"\";\n    }\n  },\n  mounted: function mounted() {\n    __WEBPACK_IMPORTED_MODULE_1__js_store__[\"a\" /* default */].state.barrageContainer = document.getElementsByClassName('view')[0];\n  }\n});\n\n/***/ }),\n/* 112 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['sessions', 'currentSession'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setCurrentSession'])),\n  filters: {\n    truncateStr: function truncateStr(value) {\n      if (value) {\n        return value.substring(0, 10);\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 113 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_util__ = __webpack_require__(32);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  data: function data() {\n    return {\n      showLoginForm: true,\n      user: {\n        loginName: '',\n        password: '',\n        confirmPassword: '',\n        registerCode: ''\n      }\n    };\n  },\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"d\" /* mapActions */])(['login', 'register']), {\n    denglu: function denglu() {\n      if (!this.user.loginName) {\n        alert('用户名不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('密码不能为空');\n        return;\n      }\n      this.login(this.user);\n    },\n    zhuce: function zhuce() {\n      if (!this.user.loginName) {\n        alert('用户名不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('密码不能为空');\n        return;\n      }\n      if (!this.user.password) {\n        alert('确认密码不能为空');\n        return;\n      }\n      if (this.user.password !== this.user.password) {\n        alert('两次输入密码不一致');\n        return;\n      }\n      this.register(this.user);\n    },\n    toggleLogin: function toggleLogin() {\n      this.showLoginForm = !this.showLoginForm;\n    }\n  }),\n  mounted: function mounted() {\n    var credential = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__js_util__[\"e\" /* cache */])('credential');\n    if (!credential) {\n      return;\n    }\n    if (credential.autoLogin) {\n      this.$store.dispatch('login', credential);\n    } else {\n      this.user.loginName = credential.loginName;\n      this.user.password = credential.password;\n    }\n  }\n});\n\n/***/ }),\n/* 114 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['me', 'currentSession'])),\n  filters: {\n    time: function time(date) {\n      if (typeof date === 'string') {\n        date = new Date(date);\n      }\n      return date.getHours() + ':' + date.getMinutes();\n    },\n    readFilter: function readFilter(alreadyRead) {\n      return alreadyRead ? '已读' : '未读';\n    }\n  },\n  directives: {\n    'scroll-bottom': {\n      componentUpdated: function componentUpdated(el) {\n        el.scrollTop = el.scrollHeight - el.clientHeight;\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 115 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['currentSession'])),\n  data: function data() {\n    return {\n      content: ''\n    };\n  },\n\n  methods: {\n    onKeyup: function onKeyup(e) {\n      if (e.keyCode === 13 && this.content.length) {\n        this.$store.dispatch('sendMsg', this.content);\n        this.content = '';\n      }\n    }\n  }\n});\n\n/***/ }),\n/* 116 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(0);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"b\" /* mapGetters */])(['onlineUsers'])),\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapMutations */])(['setCurrentSession'])),\n  filters: {\n    truncateStr: function truncateStr(value) {\n      if (value.length > 7) {\n        return value.substring(0, 6) + '...';\n      }\n      return value;\n    }\n  }\n});\n\n/***/ }),\n/* 117 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = ChatClient;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__store__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__util__ = __webpack_require__(32);\n\n\n\nfunction registerEvent() {\n  this.socket.on(\"register\", callBack);\n  this.socket.on(\"login\", callBack);\n  this.socket.on('receiveMsg', onReceiveMsg);\n  this.socket.on('disconnect', onDisconnect);\n  this.socket.on('notifyUserLogin', onNotifyUserLogin);\n  this.socket.on('kickOff', onKickOff);\n  this.socket.on('receiveRead', onReceiveRead);\n  this.socket.on('receiveBarrage', onReceiveBarrage);\n}\n\nChatClient.prototype.on = function (event, callback) {\n  this.events[event] = callback;\n  return this;\n};\n\nChatClient.prototype.connect = function (data) {\n  if (!(\"io\" in window)) {\n    alert('浏览器不支持socket.io');\n    return false;\n  }\n  var connectUrl = 'http://' + this.host + ':' + this.port;\n  this.socket = io.connect(connectUrl);\n  registerEvent.call(this);\n  return true;\n};\n\nfunction ChatClient(_ref) {\n  var host = _ref.host,\n      port = _ref.port;\n\n\n  this.host = host;\n  this.port = port;\n  this.socket = null;\n  this.events = [];\n\n  this.register = function (param) {\n    this.socket.emit(\"register\", param);\n  };\n  this.login = function (param) {\n    this.socket.emit(\"login\", param);\n  };\n  this.sendMsg = function (param) {\n    this.socket.emit('sendMsg', param);\n  };\n  this.sendBarrage = function (param) {\n    this.socket.emit('sendBarrage', param);\n  };\n  this.read = function (param) {\n    this.socket.emit('read', param);\n  };\n}\n\nfunction callBack(_ref2) {\n  var code = _ref2.code,\n      rMsg = _ref2.rMsg,\n      rData = _ref2.rData;\n\n  if (code === 1) {\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('initUsers', rData);\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('initSessions', rData.sessions);\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"e\" /* cache */])('credential', rData);\n  } else {\n    alert(rMsg);\n  }\n}\n\nfunction onReceiveBarrage(message) {\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('appendBarrage', message);\n}\n\nfunction onReceiveRead(message) {\n  var currentSession = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession,\n      sessions = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.sessions;\n\n  if (currentSession && currentSession.loginName === message.to) {\n    var session = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(session, currentSession);\n    session.messages.find(function (msg) {\n      return msg.id === message.id;\n    }).read = true;\n    return __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession = session;\n  }\n\n  var find = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.to);\n  if (find) {\n    var ss = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(ss, find);\n    ss.messages.find(function (msg) {\n      return msg.id === message.id;\n    }).read = true;\n    var index = sessions.indexOf(find);\n    sessions.splice(index, 1, ss);\n  }\n}\n\nfunction onReceiveMsg(message) {\n  var exitSession = void 0,\n      sessions = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.sessions,\n      currentSession = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession,\n      users = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users;\n\n  if (currentSession && currentSession.loginName === message.from) {\n    var session = {};\n    __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"c\" /* copyProperties */])(session, currentSession);\n    session.messages.push(message);\n    __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.currentSession = session;\n    return __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.client.read(message);\n  }\n\n  var userFrom = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* findUser */])(message.from);\n\n  if (!(exitSession = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.from))) {\n    exitSession = {\n      loginName: message.from,\n      img: userFrom.img,\n      messages: [message]\n    };\n    sessions.push(exitSession);\n  } else {\n    exitSession.messages.push(message);\n  }\n\n  if (!currentSession || currentSession && currentSession.loginName !== message.from) {\n    var user = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"b\" /* findUser */])(message.from);\n    var index = users.indexOf(user);\n    if (!user.notReadMsgCount) user.notReadMsgCount = 0;\n    user.notReadMsgCount++;\n    users.splice(index, 1, user);\n\n    var ss = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__util__[\"a\" /* findSession */])(message.from);\n    index = sessions.indexOf(ss);\n    ss.notRead = user.notReadMsgCount;\n    sessions.splice(index, 1, ss);\n  }\n}\n\nfunction onDisconnect(loginName) {\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users = __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].state.users.filter(function (item) {\n    return item && item.loginName !== loginName;\n  });\n}\n\nfunction onNotifyUserLogin(onlineUser) {\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('refreshUser', onlineUser);\n}\n\nfunction onKickOff(_ref3) {\n  var rData = _ref3.rData;\n\n  __WEBPACK_IMPORTED_MODULE_0__store__[\"a\" /* default */].commit('logout');\n  alert(rData);\n}\n\n/***/ }),\n/* 118 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(33);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_vue__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__app_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__js_store__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_reset_css__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__css_reset_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__css_reset_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_main_less__ = __webpack_require__(47);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css_main_less___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__css_main_less__);\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.devtools = true;\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__app_vue___default.a },\n  store: __WEBPACK_IMPORTED_MODULE_2__js_store__[\"a\" /* default */]\n});\n\n/***/ })\n],[118]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.305f88daf5ac069bb52d.js","/**\n * Vuex\n * http://vuex.vuejs.org/zh-cn/intro.html\n */\nimport Vue from 'vue';\nimport Vuex from 'vuex';\nimport animate from './animate';\nimport {\n  ChatClient\n} from './client'\nimport {\n  findSession,\n  findUser,\n  copyProperties,\n  guid\n} from './util'\nVue.use(Vuex);\n\nfunction connect(state) {\n  state.client = new ChatClient({host: '47.94.2.0', port: 80})\n  if (!state.client.connect()) {\n    alert('连接失败')\n  }\n}\n\nconst store = new Vuex.Store({\n  state: {\n    client: null,//socket 客户端\n    users: [],//用户列表\n    me: null, // 我的id（登录人id）\n    sessions: [],// 会话列表\n    currentSession: null,//当前聊天窗口id\n    filterKey: '', //搜索用户的所搜词\n    barrageContainer: null\n  },\n  getters: {\n    client: ({client}) => client,\n    users: ({users}) => users,\n    onlineUsers: ({users, myLoginName}) => users.filter(user => user.loginName !== myLoginName),\n    me: ({me}) => me,\n    myLoginName: ({myLoginName}) => myLoginName,\n    sessions: ({sessions, filterKey}) => sessions && sessions.filter(session => !filterKey || session.loginName.toUpperCase().includes(filterKey.toUpperCase())),\n    currentSession: ({currentSession}) => currentSession\n  },\n  mutations: {\n    //初始化会话记录\n    initSessions(state, sessions){\n      let userMapNotRead = {},\n        users = state.users\n      //计算有多少条未读，和登录用户匹配\n      sessions.forEach(session => {\n        session.messages.forEach(msg => {\n          if (!msg.read) {\n            if (!userMapNotRead[session.loginName]) {\n              userMapNotRead[session.loginName] = 0\n            }\n            userMapNotRead[session.loginName]++\n          }\n        })\n      })\n\n      users.forEach(user => {\n        let count = userMapNotRead[user.loginName]//未读数量\n        let index = users.indexOf(user)//在线用户的下标\n        user.notReadMsgCount = count\n        users.splice(index, 1, user)\n      })\n\n      state.sessions = sessions\n    },\n    //设置当前会话\n    setCurrentSession (state, session) {\n      if (!session.messages) session.messages = []\n      let exitSession = findSession(session.loginName)\n      if (exitSession) {\n        state.currentSession = exitSession\n      } else {\n        exitSession = session\n        state.currentSession = session //sessions包含currentSession的引用\n        state.sessions.push(session)\n      }\n\n      exitSession.notRead = 0\n\n      for(var j = 0; j < exitSession.messages.length;j++){\n        if(!exitSession.messages[j].read && state.me.loginName === exitSession.messages[j].to){\n          //当前窗口中有发送给自己的消息，就算阅读了\n          state.client.read(exitSession.messages[j])\n          break\n        }\n      }\n\n      let find = findUser(session.loginName);\n      if (find) {\n        let index = state.users.indexOf(find)\n        find.notReadMsgCount = 0\n        state.users.splice(index, 1, find)\n      }\n    },\n    //初始化用户列表\n    initUsers(state, user){\n      state.me = user\n      state.users = user.onlineUsers\n    },\n    //更新用户列表中用户的信息\n    refreshUser(state, user){\n      let oldUser\n      if ((oldUser = findUser(user.loginName))) {\n        //用户已经在用户列表,更新用户信息\n        copyProperties(oldUser, user)\n        return state.users[state.users.indexOf(oldUser)] = user\n      }\n      //将用户加入列表\n      state.users.push(user)\n    },\n    setFilterKey: (state, value) => state.filterKey = value,\n    logout: (state) => state.me = null,\n    appendBarrage: (state, message) => {\n      let speed = 3,\n        className,\n        barrage = document.createElement(\"div\"),\n        max = 1,//\n        min = 0\n\n      barrage.classList.add(\"barrage\");\n\n      barrage.innerHTML = message.content\n      className = message.from === state.me.loginName\n        ? 'myBarrage'\n        : 'otherBarrage'\n      barrage.classList.add(className);\n      barrage.style.left = (state.barrageContainer.offsetWidth) + \"px\";\n      state.barrageContainer.appendChild(barrage);\n      barrage.style.top = (Math.random() * (max - min) + min) * (state.barrageContainer.offsetHeight - barrage.offsetHeight) + \"px\";\n      animate(barrage, \"left\", state.barrageContainer.offsetWidth + barrage.offsetWidth, speed, function () {\n        barrage.parentNode.removeChild(barrage);\n      })\n    }\n  },\n  actions: {\n    register({state}, payload){\n      connect(state)\n      state.client.register(payload)\n    },\n    login({state}, payload) {\n      connect(state)\n      state.client.login(payload)\n    },\n    sendMsg ({state}, content) {\n      let msgId = guid(),\n        message = {\n          id: msgId,\n          from: state.me.loginName,\n          to: state.currentSession.loginName,\n          content,\n          self: true,\n          read: false,\n          date: new Date()\n        }\n\n      let session = {}\n      copyProperties(session, state.currentSession)\n      session.messages.push(message)\n      state.currentSession = session\n      //往当前窗口写消息\n\n      state.client.sendMsg({\n        id: msgId,\n        'from': state.me.loginName,\n        'to': state.currentSession.loginName,\n        content\n      })\n    },\n    sendBarrage({state}, content){\n      state.client.sendBarrage({\n        'from': state.me.loginName,\n        content\n      })\n    }\n  }\n});\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/store.js","import store from './store'\r\n\r\nfunction findSession(loginName) {\r\n  let sessions = store.getters.sessions\r\n  for (let i = 0; i < sessions.length; i++) {\r\n    if (sessions[i].loginName === loginName) {\r\n      return sessions[i]\r\n    }\r\n  }\r\n}\r\n\r\nfunction findUser(loginName) {\r\n  let users = store.getters.users\r\n  for (let i = 0; i < users.length; i++) {\r\n    if (users[i].loginName === loginName) {\r\n      return users[i]\r\n    }\r\n  }\r\n}\r\n\r\nfunction copyProperties(target, source) {\r\n  if (!target || !source) {\r\n    return console.error('target and source must not be null')\r\n  }\r\n  for (let key in source) {\r\n    target[key] = source[key]\r\n  }\r\n}\r\n\r\nfunction cache(key, value) {\r\n  if (!value) {\r\n    let valueStr = window.localStorage.getItem(key)\r\n    return valueStr\r\n      ? JSON.parse(valueStr)\r\n      : null\r\n  }\r\n\r\n  if (typeof value === 'object') {\r\n    value = JSON.stringify(value)\r\n  }\r\n  window.localStorage.setItem(key, value)\r\n}\r\n\r\nlet response = {\r\n  ok: function (data) {\r\n    this.code = 1\r\n    this.rData = data\r\n    return this\r\n  },\r\n  fail: function (msg) {\r\n    this.code = 0\r\n    this.rMsg = msg\r\n    return this\r\n  }\r\n}\r\n\r\nfunction guid() {\r\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n    var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);\r\n    return v.toString(16);\r\n  });\r\n}\r\n\r\nexport {\r\n  findSession,\r\n  findUser,\r\n  copyProperties,\r\n  cache,\r\n  response,\r\n  guid\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/util.js","//用于记录上次pos的临时变量\r\nlet target_point_x = null,\r\n  target_point_y = null;\r\n\r\nlet move = (function () {\r\n  /**\r\n   * 动画逻辑\r\n   * @param  {动画目标} target       dom节点\r\n   * @param  {方向} direction    left top bottom right\r\n   * @param  {目标巨鹿} aim_distance 数字类型\r\n   * @param  {速度} speed        int\r\n   * @return {开始执行的函数}              函数类型\r\n   */\r\n  return function (target, direction, aim_distance, speed) {\r\n    speed = typeof speed === \"number\" ? speed : 5;\r\n    let temp_target_point;\r\n    direction === \"left\" && (temp_target_point = target_point_x = target_point_x !== null\r\n      ? target_point_x - aim_distance\r\n      : target.offsetLeft - aim_distance);\r\n    direction === \"right\" && (temp_target_point = target_point_x = target_point_x !== null\r\n      ? target_point_x + aim_distance : target.offsetLeft + aim_distance);\r\n    direction === \"top\" && (temp_target_point = target_point_y = target_point_y !== null\r\n      ? target_point_y - aim_distance\r\n      : target.offsetTop - aim_distance);\r\n    direction === \"bottom\" && (temp_target_point = target_point_y = target_point_y !== null\r\n      ? target_point_y + aim_distance\r\n      : target.offsetTop + aim_distance);\r\n    return function () {\r\n      if (direction === \"left\") {\r\n        (target.offsetLeft > temp_target_point) ? (target.style.left = target.offsetLeft - speed + \"px\") : (target.style.left = temp_target_point + \"px\");\r\n      } else if (direction === \"right\") {\r\n        (target.offsetLeft < temp_target_point) ? (target.style.left = target.offsetLeft + speed + \"px\") : (target.style.left = temp_target_point + \"px\");\r\n      } else if (direction === \"top\") {\r\n        (target.offsetTop > temp_target_point) ? (target.style.top = target.offsetTop - speed + \"px\") : (target.style.top = temp_target_point + \"px\");\r\n      } else if (direction === \"bottom\") {\r\n        (target.offsetTop < temp_target_point) ? (target.style.top = target.offsetTop + speed + \"px\") : (target.style.top = temp_target_point + \"px\");\r\n      }\r\n      return temp_target_point;\r\n    }\r\n  }\r\n})();\r\n\r\n/**\r\n * 上下左右动画小插件\r\n * @param  {要执行动画的目标}   target       dom节点\r\n * @param  {方向}   direction    left,right,top,bottom\r\n * @param  {要移动的距离}   aim_distance  数字类型\r\n * @param  {速度}   speed        数字类型\r\n * @param  {回调函数} cb           函数\r\n * @return {fn}                真正的动画调用者\r\n */\r\nfunction animation(target, direction, aim_distance, speed, cb = function () {\r\n  console.log(\"callback called\");\r\n}) {\r\n  cb = typeof speed === \"function\" ? speed : cb;\r\n  let queueObj = [];\r\n  //调用新的animation的时候，重置一下，不然每次都是叠加的\r\n  target_point_x = null,\r\n    target_point_y = null;\r\n  queueObj.next = function (n_dir, queue_x, speed) {\r\n    this.push({\r\n      fn: move(target, n_dir, queue_x, speed),\r\n      dir: n_dir,\r\n      last_x: queue_x\r\n    });\r\n    return queueObj;\r\n  }\r\n  return (function () {\r\n    /**\r\n     * 真正执行动画的\r\n     * @param  {判断时候结束的条件} ani      fn\r\n     * @param  {方向} real_dir left top bottom  right\r\n     * @return {动画队列数组}          用于依次开启动画的队列数组\r\n     */\r\n    function real(ani, real_dir) {\r\n      let temp = ani,\r\n        tempArr;\r\n\r\n      function fn() {\r\n        if (real_dir === \"left\" || real_dir === \"right\") {\r\n          if (target.offsetLeft !== temp()) {\r\n            requestAnimationFrame(fn);\r\n          } else {\r\n            queueObj[0] && (tempArr = queueObj.shift());\r\n            tempArr || cb();\r\n            tempArr && real(tempArr.fn, tempArr.dir);\r\n          }\r\n        } else if (real_dir === \"top\" || real_dir === \"bottom\") {\r\n          if (target.offsetTop !== temp()) {\r\n            requestAnimationFrame(fn);\r\n          } else {\r\n            queueObj[0] && (tempArr = queueObj.shift());\r\n            tempArr || cb();\r\n            tempArr && real(tempArr.fn, tempArr.dir);\r\n          }\r\n        }\r\n      }\r\n\r\n      requestAnimationFrame(fn);\r\n    }\r\n\r\n    real(move(target, direction, aim_distance, speed), direction);\r\n    return queueObj;\r\n  })();\r\n}\r\n\r\nexport default animation\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/animate.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b822579a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n}\nvar Component = require(\"!../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./app.vue\"),\n  /* template */\n  require(\"!!../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b822579a\\\",\\\"hasScoped\\\":true}!../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./app.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-b822579a\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/app.vue\n// module id = 45\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-59b0957b\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./card.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./card.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-59b0957b\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./card.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-59b0957b\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/card.vue\n// module id = 48\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9f9decc4\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./danmu.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./danmu.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9f9decc4\\\",\\\"hasScoped\\\":false}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./danmu.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/danmu.vue\n// module id = 49\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ab3957ee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./list.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./list.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ab3957ee\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./list.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-ab3957ee\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/list.vue\n// module id = 50\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5ca4d274\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./loginPanel.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./loginPanel.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5ca4d274\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./loginPanel.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5ca4d274\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/loginPanel.vue\n// module id = 51\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-081a726c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./message.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./message.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-081a726c\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./message.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-081a726c\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/message.vue\n// module id = 52\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-0e640443\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./textBox.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./textBox.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0e640443\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./textBox.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-0e640443\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/textBox.vue\n// module id = 53\n// module chunks = 1","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/.2.1.2@extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5d03e1c0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=styles&index=0!./userListPanel.vue\")\n}\nvar Component = require(\"!../../../node_modules/.12.2.2@vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=script&index=0!./userListPanel.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/.12.2.2@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5d03e1c0\\\",\\\"hasScoped\\\":true}!../../../node_modules/.12.2.2@vue-loader/lib/selector?type=template&index=0!./userListPanel.vue\"),\n  /* styles */\n  injectStyle,\n  /* scopeId */\n  \"data-v-5d03e1c0\",\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/frontend/components/userListPanel.vue\n// module id = 54\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"scroll-bottom\",\n      rawName: \"v-scroll-bottom\"\n    }],\n    staticClass: \"message\"\n  }, [(_vm.currentSession) ? _c('ul', _vm._l((_vm.currentSession.messages), function(item) {\n    return _c('li', [_c('p', {\n      staticClass: \"time\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"time\")(item.date)))])]), _vm._v(\" \"), _c('div', {\n      staticClass: \"main\",\n      class: {\n        self: item.self\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"src\": item.self ? _vm.me.img : _vm.currentSession.img\n      }\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"text\"\n    }, [_vm._v(_vm._s(item.content))]), _vm._v(\" \"), (item.self) ? _c('div', {\n      staticClass: \"read-text\"\n    }, [_vm._v(_vm._s(_vm._f(\"readFilter\")(item.read)) + \" \")]) : _vm._e()])])\n  })) : _vm._e()])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-081a726c\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/message.vue\n// module id = 55\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"text\"\n  }, [_c('textarea', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.content),\n      expression: \"content\"\n    }],\n    attrs: {\n      \"disabled\": !_vm.currentSession,\n      \"placeholder\": \"按 Enter 发送\"\n    },\n    domProps: {\n      \"value\": (_vm.content)\n    },\n    on: {\n      \"keyup\": _vm.onKeyup,\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.content = $event.target.value\n      }\n    }\n  })])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-0e640443\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/textBox.vue\n// module id = 56\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"card\"\n  }, [_c('header', [_c('img', {\n    staticClass: \"avatar\",\n    attrs: {\n      \"width\": \"40\",\n      \"height\": \"40\",\n      \"alt\": _vm.me.name,\n      \"src\": _vm.me.img\n    }\n  }), _vm._v(\" \"), _c('p', {\n    staticClass: \"name\"\n  }, [_vm._v(_vm._s(_vm.me.loginName))])]), _vm._v(\" \"), _c('footer', [_c('input', {\n    staticClass: \"search\",\n    attrs: {\n      \"type\": \"text\",\n      \"placeholder\": \"search user...\"\n    },\n    on: {\n      \"keyup\": _vm.onKeyup\n    }\n  })])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-59b0957b\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/card.vue\n// module id = 57\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"loginPanel\"\n    }\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"loginForm\"\n    }\n  }, [_c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.showLoginForm),\n      expression: \"showLoginForm\"\n    }],\n    staticClass: \"login\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"还没注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.denglu\n    }\n  }, [_vm._v(\"登录\")])])]), _vm._v(\" \"), _c('div', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.showLoginForm),\n      expression: \"!showLoginForm\"\n    }],\n    staticClass: \"register\"\n  }, [_c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n        账号:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.loginName),\n      expression: \"user.loginName\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.loginName)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.loginName = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.password),\n      expression: \"user.password\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.password = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         确认密码:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.confirmPassword),\n      expression: \"user.confirmPassword\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.confirmPassword)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.confirmPassword = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('p', [_c('span', {\n    staticClass: \"soul-label\"\n  }, [_vm._v(\"\\n         注册秘钥:\\n        \")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.user.registerCode),\n      expression: \"user.registerCode\"\n    }],\n    staticClass: \"soul-input\",\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.user.registerCode)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.user.registerCode = $event.target.value\n      }\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"loginButtonPanel\"\n  }, [_c('a', {\n    staticClass: \"toggle\",\n    on: {\n      \"click\": _vm.toggleLogin\n    }\n  }, [_vm._v(\"已经注册？\")]), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.zhuce\n    }\n  }, [_vm._v(\"注册\")])])])])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5ca4d274\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/loginPanel.vue\n// module id = 58\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticStyle: {\n      \"width\": \"150px\"\n    }\n  }, [_vm._v(\"\\n  当前登录用户\\n  \"), _c('ul', _vm._l((_vm.onlineUsers), function(item) {\n    return _c('li', [_c('img', {\n      staticStyle: {\n        \"width\": \"20px\",\n        \"height\": \"20px\",\n        \"display\": \"inline-block\",\n        \"vertical-align\": \"middle\"\n      },\n      attrs: {\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), (item.notReadMsgCount) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"yellow\"\n      }\n    }, [_vm._v(_vm._s(item.notReadMsgCount) + \"未读\")]) : _vm._e(), _vm._v(\" \"), _c('a', {\n      attrs: {\n        \"href\": \"#\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-5d03e1c0\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/userListPanel.vue\n// module id = 59\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"barrageSendPanel\"\n  }, [_c('span', {\n    staticClass: \"soul-label\",\n    staticStyle: {\n      \"color\": \"red\"\n    }\n  }, [_vm._v(_vm._s(_vm.error))]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.msg),\n      expression: \"msg\"\n    }],\n    staticClass: \"soul-input\",\n    staticStyle: {\n      \"height\": \"50%\"\n    },\n    attrs: {\n      \"type\": \"text\"\n    },\n    domProps: {\n      \"value\": (_vm.msg)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.msg = $event.target.value\n      }\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"soul-button\",\n    on: {\n      \"click\": _vm.sendBarrage\n    }\n  }, [_vm._v(\"发送弹幕\")])])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-9f9decc4\",\"hasScoped\":false}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/danmu.vue\n// module id = 60\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"list\"\n  }, [_c('ul', _vm._l((_vm.sessions), function(item, index) {\n    return _c('li', {\n      class: [{\n        active: _vm.currentSession ?\n          item.loginName === _vm.currentSession.loginName :\n          index == 0\n      }],\n      on: {\n        \"click\": function($event) {\n          _vm.setCurrentSession(item)\n        }\n      }\n    }, [_c('img', {\n      staticClass: \"avatar\",\n      attrs: {\n        \"width\": \"30\",\n        \"height\": \"30\",\n        \"alt\": item.loginName,\n        \"src\": item.img\n      }\n    }), _vm._v(\" \"), _c('p', {\n      staticClass: \"name\"\n    }, [_c('span', [_vm._v(_vm._s(_vm._f(\"truncateStr\")(item.loginName)))]), _vm._v(\" \"), (item.notRead) ? _c('span', {\n      staticStyle: {\n        \"float\": \"right\",\n        \"background-color\": \"red\",\n        \"border-radius\": \"5px\",\n        \"width\": \"30px\",\n        \"text-align\": \"center\"\n      }\n    }, [_vm._v(\"\\n          \" + _vm._s(item.notRead) + \"\\n        \")]) : _vm._e()])])\n  }))])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-ab3957ee\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/components/list.vue\n// module id = 61\n// module chunks = 1","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return (_vm.me) ? _c('div', {\n    staticClass: \"view\"\n  }, [_c('div', {\n    staticClass: \"sidebar\"\n  }, [_c('card'), _vm._v(\" \"), _c('list')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"main\"\n  }, [_c('message'), _vm._v(\" \"), _c('TextBox')], 1), _vm._v(\" \"), _c('div', {\n    staticClass: \"userListPanel\"\n  }, [_c('userListPanel')], 1), _vm._v(\" \"), _c('danmu')], 1) : _c('div', {\n    staticClass: \"view\"\n  }, [_c('loginPanel')], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/.12.2.2@vue-loader/lib/template-compiler?{\"id\":\"data-v-b822579a\",\"hasScoped\":true}!./~/.12.2.2@vue-loader/lib/selector.js?type=template&index=0!./src/frontend/app.vue\n// module id = 62\n// module chunks = 1","<script>\r\n  import Card from './components/card';\r\n  import List from './components/list';\r\n  import TextBox from './components/textBox';\r\n  import Message from './components/message';\r\n  import loginPanel from './components/loginPanel.vue';\r\n  import userListPanel from './components/userListPanel.vue';\r\n  import danmu from './components/danmu.vue';\r\n  import store from './js/store'\r\n  import {\r\n    mapGetters,\r\n    mapActions\r\n  } from 'vuex'\r\n  export default {\r\n    components: {Card, List, TextBox, Message, loginPanel, userListPanel, danmu},\r\n    computed: {\r\n      ...mapGetters(['me'])\r\n    }\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <div class=\"view\" v-if=\"me\">\r\n    <div class=\"sidebar\">\r\n      <card></card>\r\n      <list></list>\r\n    </div>\r\n    <div class=\"main\">\r\n      <message></message>\r\n      <TextBox></TextBox>\r\n    </div>\r\n    <div class=\"userListPanel\">\r\n      <userListPanel></userListPanel>\r\n    </div>\r\n    <danmu></danmu>\r\n  </div>\r\n  <div class=\"view\" v-else>\r\n    <loginPanel></loginPanel>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .view {\r\n    margin: 0 auto;\r\n    height: 100%;\r\n\r\n    overflow: hidden;\r\n    position: relative;\r\n    border-radius: 3px;\r\n\r\n    .sidebar, .main {\r\n      height: 90%;\r\n    }\r\n    .sidebar {\r\n      float: left;\r\n      width: 25%;\r\n      color: #f4f4f4;\r\n      background-color: #2e3238;\r\n      overflow: scroll;\r\n    }\r\n    .main {\r\n      width: 75%;\r\n      position: relative;\r\n      overflow: hidden;\r\n      background-color: #eee;\r\n    }\r\n    .text {\r\n      position: absolute;\r\n      width: 100%;\r\n      bottom: 0;\r\n      left: 0;\r\n    }\r\n    .message {\r\n      height: ~'calc(100% - 160px)';\r\n    }\r\n  }\r\n\r\n  .userListPanel {\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 100px;\r\n    width: 100px;\r\n    background-color: white;\r\n  }\r\n\r\n  @media screen and (min-width: 1200px) {\r\n    .view {\r\n      width: 900px;\r\n      height: 100%;\r\n    }\r\n\r\n    .loginPanel {\r\n      width: 900px;\r\n      height: 100%;\r\n      margin: 0 auto;\r\n    }\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// app.vue?b6845b26","<script>\r\n  import {mapGetters, mapMutations} from \"vuex\";\r\n  export default {\r\n    computed: {\r\n      ...mapGetters([\r\n        'me'\r\n      ])\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setFilterKey']),\r\n      onKeyup (e) {\r\n        this.setFilterKey(e.target.value);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"card\">\r\n    <header>\r\n      <img class=\"avatar\" width=\"40\" height=\"40\" :alt=\"me.name\" :src=\"me.img\">\r\n      <p class=\"name\">{{me.loginName}}</p>\r\n    </header>\r\n    <footer>\r\n      <input class=\"search\" type=\"text\" placeholder=\"search user...\" @keyup=\"onKeyup\">\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n  .card {\r\n    padding: 12px;\r\n    border-bottom: solid 1px #24272C;\r\n\r\n    footer {\r\n      margin-top: 10px;\r\n    }\r\n\r\n    .avatar, .name {\r\n      vertical-align: middle;\r\n    }\r\n    .avatar {\r\n      border-radius: 2px;\r\n    }\r\n    .name {\r\n      display: inline-block;\r\n      margin: 0 0 0 15px;\r\n      font-size: 16px;\r\n    }\r\n    .search {\r\n      padding: 0 10px;\r\n      width: 100%;\r\n      font-size: 12px;\r\n      color: #fff;\r\n      height: 30px;\r\n      line-height: 30px;\r\n      border: solid 1px #3a3a3a;\r\n      border-radius: 4px;\r\n      outline: none;\r\n      background-color: #26292E;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// card.vue?4f7b7492","<template>\r\n  <div class=\"barrageSendPanel\">\r\n    <span class=\"soul-label\" style=\"color: red\">{{error}}</span>\r\n    <input style=\"height: 50%;\" class=\"soul-input\" type=\"text\" v-model=\"msg\">\r\n    <button class=\"soul-button\" @click=\"sendBarrage\">发送弹幕</button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import animation from '../js/animate'\r\n  import store from '../js/store'\r\n  export default {\r\n    data(){\r\n      return {\r\n        msg: \"\",\r\n        error:'',\r\n      }\r\n    },\r\n    methods: {\r\n      sendBarrage(){\r\n        if (!this.msg) {\r\n          return this.error = '弹幕不能为空'\r\n        }\r\n        this.$store.dispatch('sendBarrage', this.msg)\r\n        this.msg = this.error = \"\";\r\n      }\r\n    },\r\n    mounted(){\r\n      store.state.barrageContainer = document.getElementsByClassName('view')[0];\r\n    }\r\n  }\r\n</script>\r\n<style>\r\n  .barrageSendPanel {\r\n    height: 10%;\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .wrap {\r\n    height: 400px;\r\n    width: 80vw;\r\n    border: 1px solid #000;\r\n  }\r\n\r\n  .barrage {\r\n    color: white;\r\n    font-size: 14px;\r\n    font-weight: bold;\r\n    text-shadow: 2px 3px 2px #000;\r\n    position: absolute;\r\n    z-index: 1000;\r\n    border-top-left-radius: 14px;\r\n    border-bottom-left-radius: 14px;\r\n    padding: 6px 20px 6px 20px;\r\n    white-space: nowrap;\r\n  }\r\n\r\n  .myBarrage {\r\n    border: 5px solid white;\r\n    background: -webkit-linear-gradient(left, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: -o-linear-gradient(right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: -moz-linear-gradient(right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: linear-gradient(to right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n  }\r\n\r\n  .otherBarrage {\r\n    background: -webkit-linear-gradient(left, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: -o-linear-gradient(right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: -moz-linear-gradient(right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n    background: linear-gradient(to right, rgba(19, 206, 102, 0.7) 50%, rgba(255, 255, 255, 0.2) 100%);\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// danmu.vue?4c0c2fff","<script>\r\n  import {mapGetters} from \"vuex\";\r\n  import {mapMutations} from \"vuex\";\r\n  export default {\r\n    computed: {\r\n      ...mapGetters([\r\n        'sessions',\r\n        'currentSession'\r\n      ])\r\n    },\r\n    methods: {\r\n      ...mapMutations([\r\n        'setCurrentSession'\r\n      ])\r\n    },\r\n    filters: {\r\n      truncateStr(value){\r\n        if (value) {\r\n          return value.substring(0, 10)\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"list\">\r\n    <ul>\r\n      <li v-for=\"(item, index) in sessions\"\r\n          :class=\"[{\r\n          active: currentSession\r\n          ? item.loginName === currentSession.loginName\r\n          : index == 0}]\"\r\n          @click=\"setCurrentSession(item)\">\r\n        <img class=\"avatar\" width=\"30\" height=\"30\" :alt=\"item.loginName\" :src=\"item.img\">\r\n        <p class=\"name\">\r\n          <span>{{item.loginName | truncateStr}}</span>\r\n          <span style=\"float: right;\r\n          background-color: red;border-radius: 5px;\r\n          width: 30px;\r\n          text-align: center\" v-if=\"item.notRead\">\r\n            {{item.notRead}}\r\n          </span>\r\n        </p>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style scoped lang=\"less\">\r\n  .list {\r\n\r\n    li {\r\n      padding: 12px 15px;\r\n      border-bottom: 1px solid #292C33;\r\n      cursor: pointer;\r\n      transition: background-color .1s;\r\n\r\n      &:hover {\r\n        background-color: rgba(255, 255, 255, 0.03);\r\n      }\r\n      &.active {\r\n        background-color: rgba(255, 255, 255, 0.5);\r\n      }\r\n    }\r\n    .avatar, .name {\r\n      vertical-align: middle;\r\n    }\r\n    .avatar {\r\n      display: block;\r\n      border-radius: 2px;\r\n    }\r\n    .name {\r\n      display: block;\r\n      margin: 0 0 0 15px;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// list.vue?0b826030","<script>\r\n  import {\r\n    mapGetters,\r\n    mapActions\r\n  } from 'vuex'\r\n  import{\r\n    cache\r\n  }from '../js/util'\r\n  export default{\r\n    data(){\r\n      return {\r\n        showLoginForm: true,\r\n        user: {\r\n          loginName: '',\r\n          password: '',\r\n          confirmPassword: '',\r\n          registerCode: ''\r\n        }\r\n      }\r\n    },\r\n    methods: {\r\n      ...mapActions(['login', 'register']),\r\n      denglu () {\r\n        if (!this.user.loginName) {\r\n          alert('用户名不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('密码不能为空')\r\n          return\r\n        }\r\n        this.login(this.user);\r\n      },\r\n      zhuce(){\r\n        if (!this.user.loginName) {\r\n          alert('用户名不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('密码不能为空')\r\n          return\r\n        }\r\n        if (!this.user.password) {\r\n          alert('确认密码不能为空')\r\n          return\r\n        }\r\n        if (this.user.password !== this.user.password) {\r\n          alert('两次输入密码不一致')\r\n          return\r\n        }\r\n        this.register(this.user);\r\n      },\r\n      toggleLogin(){\r\n        this.showLoginForm = !this.showLoginForm\r\n      }\r\n    },\r\n    mounted(){\r\n      var credential = cache('credential');\r\n      if (!credential) {\r\n        return\r\n      }\r\n      if (credential.autoLogin) {\r\n        this.$store.dispatch('login', credential)\r\n      } else {\r\n        this.user.loginName = credential.loginName\r\n        this.user.password = credential.password\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<template>\r\n  <div id=\"loginPanel\">\r\n    <div id=\"loginForm\">\r\n      <div class=\"login\" v-show=\"showLoginForm\">\r\n        <p>\r\n          <span class=\"soul-label\">\r\n          账号:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.loginName\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.password\"/>\r\n        </p>\r\n        <div class=\"loginButtonPanel\">\r\n          <a class=\"toggle\" @click=\"toggleLogin\">还没注册？</a>\r\n          <button class=\"soul-button\" @click=\"denglu\">登录</button>\r\n        </div>\r\n      </div>\r\n      <div class=\"register\" v-show=\"!showLoginForm\">\r\n        <p>\r\n          <span class=\"soul-label\">\r\n          账号:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.loginName\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.password\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           确认密码:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.confirmPassword\"/>\r\n        </p>\r\n        <p>\r\n          <span class=\"soul-label\">\r\n           注册秘钥:\r\n          </span>\r\n          <input class=\"soul-input\" type=\"text\" v-model=\"user.registerCode\"/>\r\n        </p>\r\n        <div class=\"loginButtonPanel\">\r\n          <a class=\"toggle\" @click=\"toggleLogin\">已经注册？</a>\r\n          <button class=\"soul-button\" @click=\"zhuce\">注册</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n\r\n\r\n  #loginPanel {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n    width: 100%;\r\n    height: 90%;\r\n    border-radius: 3px;\r\n    background-color: rgb(255, 255, 255);\r\n  }\r\n\r\n  #loginForm {\r\n    width: 80%;\r\n  }\r\n\r\n  .loginButtonPanel {\r\n    display: -webkit-flex;\r\n    display: flex;\r\n    -webkit-align-items: center;\r\n    align-items: center;\r\n    -webkit-justify-content: center;\r\n    justify-content: center;\r\n  }\r\n\r\n  .toggle {\r\n    color: blue;\r\n    &:hover {\r\n      cursor: pointer;\r\n    }\r\n  }\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// loginPanel.vue?7d944bfa","<script>\r\n  import {mapGetters} from 'vuex'\r\n  export default {\r\n    computed: {\r\n      ...mapGetters(['me', 'currentSession'])\r\n    },\r\n    filters: {\r\n      // 将日期过滤为 hour:minutes\r\n      time (date) {\r\n        if (typeof date === 'string') {\r\n          date = new Date(date);\r\n        }\r\n        return date.getHours() + ':' + date.getMinutes();\r\n      },\r\n      readFilter(alreadyRead){\r\n        return alreadyRead\r\n          ? '已读'\r\n          : '未读'\r\n      }\r\n    },\r\n    directives: {\r\n      // 发送消息后滚动到底部\r\n      'scroll-bottom': {\r\n        componentUpdated(el){\r\n          el.scrollTop = el.scrollHeight - el.clientHeight;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<template>\r\n  <div class=\"message\" v-scroll-bottom>\r\n    <ul v-if=\"currentSession\">\r\n      <li v-for=\"item in currentSession.messages\">\r\n        <p class=\"time\">\r\n          <span>{{ item.date | time}}</span>\r\n        </p>\r\n        <div class=\"main\" :class=\"{ self: item.self }\">\r\n          <img class=\"avatar\" width=\"30\" height=\"30\" :src=\"item.self ? me.img : currentSession.img\"/>\r\n          <div class=\"text\">{{ item.content }}</div>\r\n          <div v-if=\"item.self\" class=\"read-text\">{{ item.read | readFilter}} </div>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .message {\r\n    padding: 10px 15px;\r\n    overflow-y: scroll;\r\n\r\n    li {\r\n      margin-bottom: 15px;\r\n    }\r\n    .time {\r\n      margin: 7px 0;\r\n      text-align: center;\r\n\r\n      > span {\r\n        display: inline-block;\r\n        padding: 0 18px;\r\n        font-size: 12px;\r\n        color: #fff;\r\n        border-radius: 2px;\r\n        background-color: #dcdcdc;\r\n      }\r\n    }\r\n    .avatar {\r\n      float: left;\r\n      margin: 0 10px 0 0;\r\n      border-radius: 3px;\r\n    }\r\n    .text {\r\n      vertical-align: middle;\r\n      display: inline-block;\r\n      position: relative;\r\n      padding: 0 10px;\r\n      max-width: ~'calc(100% - 40px)';\r\n      min-height: 30px;\r\n      line-height: 2.5;\r\n      font-size: 12px;\r\n      text-align: left;\r\n      word-break: break-all;\r\n      background-color: #fafafa;\r\n      border-radius: 4px;\r\n\r\n      &:before {\r\n        content: \" \";\r\n        position: absolute;\r\n        top: 9px;\r\n        right: 100%;\r\n        border: 6px solid transparent;\r\n        border-right-color: #fafafa;\r\n      }\r\n    }\r\n\r\n    .read-text {\r\n      vertical-align: bottom;\r\n      display: inline-block;\r\n      position: relative;\r\n      top:20px;\r\n      left: -5px;\r\n      padding: 0 10px;\r\n      max-width: ~'calc(100% - 40px)';\r\n      min-height: 30px;\r\n      line-height: 2;\r\n      font-size: 10px;\r\n      text-align: left;\r\n      word-break: break-all;\r\n      border-radius: 4px;\r\n    }\r\n\r\n    .self {\r\n      text-align: right;\r\n\r\n      .avatar {\r\n        float: right;\r\n        margin: 0 0 0 10px;\r\n      }\r\n      .text {\r\n        background-color: #b2e281;\r\n\r\n        &:before {\r\n          right: inherit;\r\n          left: 100%;\r\n          border-right-color: transparent;\r\n          border-left-color: #b2e281;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// message.vue?5627e5a2","<script>\r\n  import {mapGetters} from 'vuex'\r\n  export default {\r\n    computed: {\r\n      ...mapGetters(['currentSession'])\r\n    },\r\n    data(){\r\n      return {\r\n        content: ''\r\n      }\r\n    },\r\n    methods: {\r\n      onKeyup (e) {\r\n        if (e.keyCode === 13 && this.content.length) {\r\n          this.$store.dispatch('sendMsg', this.content);\r\n          this.content = '';\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<template>\r\n  <div class=\"text\">\r\n    <textarea :disabled=\"!currentSession\"\r\n              placeholder=\"按 Enter 发送\"\r\n              v-model=\"content\"\r\n              @keyup=\"onKeyup\">\r\n    </textarea>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n  .text {\r\n    height: 160px;\r\n    border-top: solid 1px #ddd;\r\n\r\n    textarea {\r\n      padding: 10px;\r\n      height: 100%;\r\n      width: 100%;\r\n      border: none;\r\n      outline: none;\r\n      font-family: \"Micrsofot Yahei\";\r\n      resize: none;\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// textBox.vue?2e7a9e37","<script>\r\n  import {mapGetters} from 'vuex'\r\n  import {mapMutations} from 'vuex'\r\n  export default{\r\n    computed: {\r\n      ...mapGetters(['onlineUsers'])\r\n    },\r\n    methods: {\r\n      ...mapMutations(['setCurrentSession'])\r\n    },\r\n    filters: {\r\n      truncateStr(value){\r\n        if (value.length > 7) {\r\n          return value.substring(0, 6) + '...'\r\n        }\r\n        return value\r\n      }\r\n    }\r\n  }\r\n</script>\r\n<template>\r\n  <div style=\"width: 150px\">\r\n    当前登录用户\r\n    <ul>\r\n      <li v-for=\"item in onlineUsers\">\r\n        <img style=\"width: 20px;height: 20px;display: inline-block;vertical-align: middle\" :src=\"item.img\"/>\r\n        <span style=\"float: right;background-color: yellow\" v-if=\"item.notReadMsgCount\">{{item.notReadMsgCount}}未读</span>\r\n        <a @click=\"setCurrentSession(item)\" href=\"#\">{{item.loginName | truncateStr}}</a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</template>\r\n<style lang=\"less\" scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// userListPanel.vue?23f6f3a3","import store from './store'\r\nimport {\r\n  findSession,\r\n  findUser,\r\n  cache,\r\n  copyProperties\r\n} from './util'\r\n\r\n//注册事件\r\nfunction registerEvent() {\r\n  this.socket.on(\"register\", callBack)\r\n  this.socket.on(\"login\", callBack)\r\n  this.socket.on('receiveMsg', onReceiveMsg)\r\n  this.socket.on('disconnect', onDisconnect)\r\n  this.socket.on('notifyUserLogin', onNotifyUserLogin)\r\n  this.socket.on('kickOff', onKickOff)\r\n  this.socket.on('receiveRead', onReceiveRead)\r\n  this.socket.on('receiveBarrage', onReceiveBarrage)\r\n}\r\n//注册回调事件（监听服务端推送事件）\r\nChatClient.prototype.on = function (event, callback) {\r\n  this.events[event] = callback;\r\n  return this;\r\n}\r\n\r\n//与服务器建立webSocket连接\r\nChatClient.prototype.connect = function (data) {\r\n  if (!(\"io\" in window)) {\r\n    alert('浏览器不支持socket.io')\r\n    return false\r\n  }\r\n  let connectUrl = 'http://' + this.host + ':' + this.port\r\n  this.socket = io.connect(connectUrl)\r\n  registerEvent.call(this)\r\n  return true\r\n}\r\n\r\nexport function ChatClient({host, port}) {\r\n\r\n  this.host = host\r\n  this.port = port\r\n  this.socket = null\r\n  this.events = []\r\n\r\n  this.register = function (param) {\r\n    this.socket.emit(\"register\", param);\r\n  }\r\n  this.login = function (param) {\r\n    this.socket.emit(\"login\", param);\r\n  }\r\n  this.sendMsg = function (param) {\r\n    this.socket.emit('sendMsg', param);\r\n  }\r\n  this.sendBarrage = function (param) {\r\n    this.socket.emit('sendBarrage', param);\r\n  }\r\n  this.read = function (param) {\r\n    this.socket.emit('read', param)\r\n  }\r\n}\r\n\r\nfunction callBack({code, rMsg, rData}) {\r\n  if (code === 1) {\r\n    store.commit('initUsers', rData)\r\n    store.commit('initSessions', rData.sessions)\r\n    cache('credential', rData)\r\n  } else {\r\n    alert(rMsg)\r\n  }\r\n}\r\n\r\nfunction onReceiveBarrage(message) {\r\n  store.commit('appendBarrage', message)\r\n}\r\n\r\nfunction onReceiveRead(message) {\r\n  let currentSession = store.state.currentSession,\r\n    sessions = store.state.sessions\r\n\r\n  if (currentSession && currentSession.loginName === message.to) {\r\n    //往当前对话窗口添加消息\r\n    let session = {}\r\n    copyProperties(session, currentSession)\r\n    session.messages.find(msg => msg.id === message.id).read = true//标记已读\r\n    return store.state.currentSession = session\r\n  }\r\n\r\n  let find = findSession(message.to)\r\n  if (find) {\r\n    //往当前对话窗口添加消息\r\n    let ss = {}\r\n    copyProperties(ss, find)\r\n    ss.messages.find(msg => msg.id === message.id).read = true//标记已读\r\n    let index = sessions.indexOf(find)\r\n    sessions.splice(index, 1, ss)\r\n  }\r\n}\r\n\r\nfunction onReceiveMsg(message) {\r\n  let exitSession,\r\n    sessions = store.state.sessions,\r\n    currentSession = store.state.currentSession,\r\n    users = store.state.users\r\n\r\n  if (currentSession && currentSession.loginName === message.from) {\r\n    //往当前对话窗口添加消息\r\n    let session = {}\r\n    copyProperties(session, currentSession)\r\n    session.messages.push(message)\r\n    store.state.currentSession = session\r\n    return store.state.client.read(message) //已读\r\n  }\r\n\r\n  let userFrom = findUser(message.from)\r\n\r\n  //往聊天缓存中添加消息\r\n  if (!(exitSession = findSession(message.from))) {\r\n    // 聊天记录里面没有from的session，新建from的session\r\n    exitSession = {\r\n      loginName: message.from,\r\n      img: userFrom.img,\r\n      messages: [message]\r\n    }\r\n    sessions.push(exitSession)\r\n  } else {\r\n    //from的session加入消息\r\n    exitSession.messages.push(message)\r\n  }\r\n\r\n  if (!currentSession || (currentSession && currentSession.loginName !== message.from)) {\r\n    //标记未读的数量\r\n    let user = findUser(message.from)\r\n    let index = users.indexOf(user)\r\n    if (!user.notReadMsgCount) user.notReadMsgCount = 0\r\n    user.notReadMsgCount++\r\n    users.splice(index, 1, user)\r\n\r\n    let ss = findSession(message.from)\r\n    index = sessions.indexOf(ss)\r\n    ss.notRead = user.notReadMsgCount\r\n    sessions.splice(index, 1, ss)\r\n  }\r\n}\r\n\r\nfunction onDisconnect(loginName) {\r\n  store.state.users = store.state.users.filter(item => item && item.loginName !== loginName)\r\n}\r\n\r\nfunction onNotifyUserLogin(onlineUser) {\r\n  store.commit('refreshUser', onlineUser)\r\n}\r\n\r\nfunction onKickOff({rData}) {\r\n  store.commit('logout')\r\n  alert(rData)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/js/client.js","import Vue from 'vue';\r\nimport App from './app.vue';\r\nimport store from './js/store';\r\nimport './css/reset.css'\r\nimport './css/main.less'\r\n\r\nVue.config.devtools = true;\r\n\r\nnew Vue({\r\n  el: '#app',\r\n  template: '<App/>',\r\n  components: { App },\r\n  store: store\r\n})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/frontend/main.js"],"sourceRoot":""}
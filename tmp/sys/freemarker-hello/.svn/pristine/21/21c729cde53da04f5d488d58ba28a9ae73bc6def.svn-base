package org.konghao.freemarker.test;

import java.util.Arrays;
import java.util.Date;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

import org.junit.Before;
import org.junit.Test;
import org.konghao.freemarker.FreemarkerUtil;
import org.konghao.freemarker.model.User;

public class TestFreemarker {
	FreemarkerUtil fu;
	Map<String,Object> root = null;
	
	@Before
	public void setUp() {
		fu = new FreemarkerUtil();
		root = new HashMap<String,Object>();
	}
	
	@Test
	public void test01() {
		//1、创建数据模型
		Map<String,Object> root = new HashMap<String,Object>();
		//2、为数据模型添加值
		root.put("username", "张三");
		//3、将数据模型和模板组合的数据输出到控制台
		fu.print("01.ftl", root);
		fu.fprint("02.ftl", root, "01.html");
	}
	
	@Test
	public void test02() {
		//freemarker还可以输出相应的对象
		root.put("user", new User(1,"李四",16));
		sprint("03.ftl");
		fprint("03.ftl","03.html");
	}
	
	@Test
	public void test04() {
		List<User> users = Arrays.asList(new User(1,"张三",22),new User(2,"李四",33));
		root.put("users",users);
		sprint("04.ftl");
		fprint("04.ftl","04.html");
	}
	
	@Test
	public void test05() {
		root.put("username", "管理员");
		List<User> users = Arrays.asList(new User(1,"张三",22),new User(2,"李四",33));
		root.put("users",users);
		sprint("05.ftl");
		fprint("05.ftl","05.html");
	}
	
	@Test
	public void test06() {
		
		//此时user对象并没有group的值，这时如果在页面显示group直接报错
		//freemarker不会处理空值
		root.put("user",new User(1,"地点",22));
		sprint("06.ftl");
	}
	
	@Test
	public void test07() {
		root.put("now",new Date());
		sprint("07.ftl");
		fprint("07.ftl", "07.html");
	}
	
	private void sprint(String name) {
		fu.print(name, root);
	}
	private void fprint(String name,String filename) {
		fu.fprint(name, root, filename);
	}
}

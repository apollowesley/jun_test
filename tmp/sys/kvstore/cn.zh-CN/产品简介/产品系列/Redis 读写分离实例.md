# Redis 读写分离实例 {#concept_zm4_3mh_tdb .concept}

## 简介 {#section_jwr_4g4_tdb .section}

针对读多写少的业务场景，云数据库 Redis 版推出了读写分离的产品形态，提供高可用、高性能、高灵活的读写分离服务，解决热点数据集中及高并发读取的业务需求，最大化地节约用户运维成本。

## 组件 {#section_kwr_4g4_tdb .section}

Redis 读写分离版本由 Proxy（路由）服务器、主-备节点及只读节点组成。

![](http://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/3108/924_zh-CN.png)

-   备节点作为热备节点不对外提供服务。只读节点承担读请求，Proxy 按权重（目前权重由系统分配 ，暂时不支持自定义）将读写请求转发到主节点或者某个只读节点上。

    **说明：** 

    系统会将读请求平均分配到主节点和只读节点。比如您购买3个只读实例的配置，读权重是主节点和3个只读各自25%。

-   HA 系统自动监控各节点的健康状态，异常时发起主备切换或重搭只读节点，并更新相应的路由及权重信息。
-   读写分离版本采取链式复制架构，可以通过扩展只读实例个数使整体实例性能线性增长；同时基于阿里云在源码层面对 Redis 复制流程的特定优化，可以最大程度的提升线性复制的系统稳定性。
-   应用和 Redis 读写分离版建立连接，Proxy 会自动识别客户端发起的读写请求类型，按照权重作负载均衡，将请求转发到不同的数据节点中，写请求转发给主节点，读操作转发给相应的只读节点。
-   Redis 集群版在 Redis 开源协议的基础上进行开发，100%兼容 Redis 协议命令。支持 Redis 标准版（双副本）一键平滑升级至读写分离版，同时可以将自建的 Redis 数据库可以平滑迁移 至 Redis 读写分离版。

## 特点 {#section_ph5_xg4_tdb .section}

-   **高可用**

    -   Redis 读写分离版本依赖自研的 HA 系统自动监控所有数据节点的健康状态，为整个实例的可用性保驾护航。主节点不可用时自动选择新的主节点并且重新搭建复制拓扑。某个只读节点异常，HA 系统能够自动探知并重新启动新节点完成数据同步，下线异常节点。

    -   Proxy 模块实时感知每个只读实例的服务状态。在某个只读实例异常期间，Proxy 会自动降低该节点的服务权重，发现只读节点连续失败超过一定次数以后，会停止异常节点的服务权利，并具备继续监控后续重新启动节点服务的能力。

-   **高性能**

    Redis 读写分离版本采取链式复制架构，可以通过扩展只读实例个数使整体实例性能线性增长，充分利用每一个只读节点的物理资源。


## 使用场景 {#section_ghv_yg4_tdb .section}

-   **读取请求 QPS 压力较大**

    标准版 Redis 无法支撑较大的 QPS，如果业务类型是偏读多写少类型，需要采用多个只读节点的部署方式来冲破 Redis 单线程的性能瓶颈。Redis 集群版提供1个、3个、5个等只读节点配置，相比标准版可以将 QPS 提升近5倍。

-   **对 Redis 协议兼容性要求较高的业务**

    读写分离版本完全兼容 Redis 协议，业务可以平滑迁移。

-   **Redis 作为持久化数据存储使用的业务**

    读写分离版提供持久化机制及备份恢复机制，极大的保证数据可靠性。


